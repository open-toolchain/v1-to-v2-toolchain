version: '2'
messages:
  $i18n: locales.yml
template:
  name:
    $ref: "#/messages/template.name"
  description:
    $ref: "#/messages/template.description"
  header: '![](toolchain.svg)'
  required:
    - repo
toolchain:
  template:
    v1-projectId: '{{projectId}}'
    scheduledDate: '{{scheduledDate}}'
    v1-pipelineStages: '{{v1PipelineStages}}'
    v1-projectName: '{{v1ProjectName}}'
    v1-ProjectPublicVisibility: '{{v1ProjectPublicVisibility}}'
    getting_started:
      $ref: "#/messages/template.gettingStarted"
  name: '{{projectName}}'
  generator: migration-engine
services:
  repo:
    service_id: hostedgit
    parameters:
      repo_name: '{{form.hostedgit.parameters.repo_name}}'
      repo_url: ''
      type: new
      has_issues: true
      private_repo: '{{form.hostedgit.parameters.private_repo}}'
      enable_traceability: '{{form.hostedgit.parameters.enable_traceability}}'
      track_and_plan:
        query: '{{form.hostedgit.parameters.query}}'
        labels: '{{form.hostedgit.parameters.labels}}'
        migrateTAndP: '{{form.hostedgit.parameters.migrateTAndP}}'

  build:
    service_id: pipeline
    parameters:
      services:
        - repo
      name: '{{projectName}}'
      v1-projectId: '{{projectId}}'
      configuration:
        content: '{{pipelineContent}}'
        execute: false
        env:
          REPO: repo
        source:
          version: v1
          environment: '{{pipelineEnv}}'
          pipelineUrl: '{{pipelineUrl}}'
          projectUrl: '{{projectUrl}}'
          showLink: true
  webide:
    service_id: orion
form:
  hostedgit:
    parameters:
      existing_repo_url: '{{projectRepoUrl}}'
      repo_name: '{{repoName}}'
      private_repo: '{{privateRepo}}'
      enable_traceability: false
      migrateTAndP: '{{migrateTAndP}}'
      query: ""
      labels:
        type: true
        severity: true
        state: true
        priority: true
        resolution: true
        filedAgainst: true
        tags: true
    schema:
      $ref: github.json
